= The Problem

.Description

bla bla

.Sample I/O
[source,bash]
bla bla


== USER NOTES

I make the assumption that the size of the canvas is not more than the length of a single text screen 80 characters
, what acceptable to most console users.

Since at this stage the requirements are not detailed, it is assumed that the program behaves  bla bla

== DEVELOPER NOTES

* Please install
https://www.oracle.com/technetwork/java/javase/downloads/jdk12-downloads-5295953.html[*LATEST!* version java 12]

* Please install
https://docs.gradle.org/current/userguide/installation.html[latest version gradle 5.1.1]

* Simpliest way - is to use project's gradle wrapper (with smallest gradle-wrapper.jar inside for gradle downloading).
But some organizations (banks:) do not allow projects to submit binary files.
The alternative approach to install gradle and generate gradle wrapper
[source,bash]
gradle wrapper

* for building project use
https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/html/[gradle plugin]
[source,bash]
gradlew build


* for running use gradle command for generate distribution
[source,bash]
gradlew bootDistZip

** goto folder and unpack
[source,bash]
/riso/build/distributions/riso-boot-1.0.0.zip

** run java programm
[source,bash]
riso-boot-1.0.0/bin/riso.bat

** Please notice:
if you run directly under gradle,due to spring shell issue, you will not find first prompt message


== ARCHITECTURE NOTES

=== BUSINESS ARCHITECTURE

Imagine that this application is intended for employees of Bank branches and helps them to mark the workspace for scanning documents

Thus the app is relates to the https://github.com/wilmerkrisp/bian/blob/master/msa1.png["Business support"] domain for https://bian.org/servicelandscape/[banking standard BIAN]


* Since this application is an internal banking software, the assumption is used - the lack of internationalization
* The application is designed for one user.
* In performance it is assumed that it will create 100 canvases a day.
* There are no requirements for the size of the application (the virtual workplace of a Bank employee takes no more than 2 gigabytes).
* Requirements to the level of application criticality by Bank classification: BO (business operational)


=== INFORMATION SYSTEM ARCHITECTURE

* The app is SPA java console application, in order not to reinvent the wheel, https://docs.spring.io/spring-shell/docs/3.0.0.BUILD-SNAPSHOT/reference/htmlsingle/[the Spring Shell framework for console applications] is taken as a basis (as there are no performance/size requirements for the application).

* this application uses  https://github.com/wilmerkrisp/patterns/blob/master/patterns.pdf[patterns from the classifier]

* made benchmark test: the most interesting test of this application: fill lines O(n^2) complexity + where n is the size of the filled area
[source,bash]
gradle jmh

* profiling an application,
please note that an external jprofile installation is required.
[source,bash]
gradle saveProfile

** image:/docs/profile/profile1.png[width=700, link="/docs/profile/profile1.png"]
image:/docs/profile/profile2.png[width=700, link="/docs/profile/profile2.png"]


* cover the test code of the most important classes of the subject area
in addition to unit tests, integration and functional tests have also been created
[source,bash]
gradlew test //for unit testing
gradlew testFunctional //for functional testing
gradlew testIntegration //for integration testing

** image:/docs/Code coverage testing report/coverage.png[width=700, link="/docs/Code coverage testing report/coverage.png"]


* class diagramm
[source,bash]
gradlew archidoc

** image:/docs/archidoc/classdiagram.png[width=700, link="image:/docs/archidoc/classdiagram.png"]

* for installing the same environment set File--Settings repository = https://github.com/wilmerkrisp/idesettingrepository[git@github.com:wilmerkrisp/idesettingrepository.git] +
 and app template used  https://github.com/wilmerkrisp/apptemplate/tree/master/winter


* gradle used (see /build.gradle), please use gradle wrapper ./gradlew for running tasks
** project name inside settings.gradle (rootProject.name)
** main class name and version setted inside build.gradle

NOTE: IDE--Settings--Build--Gradle: +
select: Gradle wrapper customization in build script +
delegate IDE build/run actions to gradle

* project source sets:
** jmh - for benchmarking
** main
** test
** testFunctional
** testIntegration


* well-known libraries are widely used (Guava, Apache commons)
** in accordance with the principles of reference architectures of https://www.opengroup.org/togaf[TOGAF] architecture, the most well-established components are transferred to the library, here I use https://github.com/wilmerkrisp/himalaya[my own library]

** Lombok annotations are widely used, see configuration inside build.gradle (then /lombok.config autogenerated)

** - logback used for logging,

NOTE: configuration file at /src/main/resources/logback-spring.xml
see log file at /riso.log

* partially used functional approach (Vavr, Cyclops)
** wrapping checked exceptions into bool, Try, Either, flow events, Optional depending on situations
** pattern matching inside Switch
** so as the excitement of the exceptions is expensive then all errors are reported as events of the flow

* reactive approach is used (Spring Reactor) for further parallel scaling of threads
** in the future, you should call all commands from the same Flux (Flux.create for example as in the Android reactive applications),
place processing (domain methods) in a separate thread and draw the result back in the UI thread
** at the service level, all exceptions except illegalArgumentException are wrapped in a high-level message to the client

* the following https://github.com/wilmerkrisp/conventions[coding standards and conventions were used]

=== TECHNOLOGICAL ARCHITECTURE

* monitoring and outer recovery from failures outside the scope of this work



